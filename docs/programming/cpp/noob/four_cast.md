
# C++ ç±»å‹è½¬æ¢ (Cast) è¯¦è§£

C++ æä¾›äº†å››ç§ç±»å‹è½¬æ¢æ“ä½œç¬¦ï¼ˆä¹Ÿç§°ä¸º `cast`ï¼‰ï¼Œåˆ†åˆ«æ˜¯ `static_cast`ã€`dynamic_cast`ã€`const_cast` å’Œ `reinterpret_cast`ã€‚è¿™äº›æ“ä½œç¬¦å–ä»£äº†Cè¯­è¨€ä¸­å±é™©çš„å¼ºåˆ¶ç±»å‹è½¬æ¢ï¼Œæä¾›äº†æ›´å®‰å…¨ã€æ›´æ˜ç¡®çš„ç±»å‹è½¬æ¢æœºåˆ¶ã€‚ç†è§£å®ƒä»¬çš„åŒºåˆ«å’Œé€‚ç”¨åœºæ™¯ï¼Œæ˜¯ç¼–å†™å¥å£®C++ä»£ç çš„å…³é”®åŸºç¡€ã€‚

> **å­¦ä¹ æç¤º**ï¼šåˆå­¦è€…å¸¸çŠ¯çš„é”™è¯¯æ˜¯è¿‡åº¦ä½¿ç”¨Cé£æ ¼çš„ `(type)value` è½¬æ¢ã€‚C++çš„å››ç§`cast`æ“ä½œç¬¦é€šè¿‡æ˜ç¡®çš„è¯­æ³•è®¾è®¡ï¼Œå¸®åŠ©å¼€å‘è€…æ¸…æ™°è¡¨è¾¾è½¬æ¢æ„å›¾ï¼ŒåŒæ—¶è®©ç¼–è¯‘å™¨è¿›è¡Œæ›´ä¸¥æ ¼çš„æ£€æŸ¥ã€‚

## 1. `static_cast`ï¼šç¼–è¯‘æ—¶å®‰å…¨è½¬æ¢

### 1.1 æ ¸å¿ƒç‰¹ç‚¹

`static_cast` æ˜¯**ç¼–è¯‘æ—¶**è¿›è¡Œç±»å‹è½¬æ¢çš„æ“ä½œç¬¦ï¼Œé€‚ç”¨äºé€»è¾‘ä¸Šåˆç†çš„ç±»å‹è½¬æ¢ã€‚å®ƒä¸ä¼šè¿›è¡Œè¿è¡Œæ—¶ç±»å‹æ£€æŸ¥ï¼Œå› æ­¤è½¬æ¢çš„å®‰å…¨æ€§å®Œå…¨ä¾èµ–äºç¨‹åºå‘˜çš„æ­£ç¡®ä½¿ç”¨ã€‚

```mermaid
flowchart LR
    A[æºç±»å‹] -->|ç¼–è¯‘æ—¶æ£€æŸ¥| B[ç›®æ ‡ç±»å‹]
    B --> C{è½¬æ¢æ˜¯å¦åˆæ³•ï¼Ÿ}
    C -->|æ˜¯| D[æˆåŠŸè½¬æ¢]
    C -->|å¦| E[ç¼–è¯‘é”™è¯¯]
```

### 1.2 å…¸å‹åº”ç”¨åœºæ™¯

#### 1.2.1 åŸºæœ¬æ•°æ®ç±»å‹è½¬æ¢

è¿™æ˜¯æœ€å®‰å…¨ã€æœ€å¸¸è§çš„ç”¨æ³•ï¼Œç¼–è¯‘å™¨ä¼šè¿›è¡Œéšå¼ç±»å‹æ£€æŸ¥ï¼š

```cpp
int main() {
    int i = 10;
    float f = static_cast<float>(i);  // å®‰å…¨ï¼šint â†’ floatï¼ˆç²¾åº¦æå‡ï¼‰
    
    float pi = 3.14159;
    int n = static_cast<int>(pi);     // éœ€æ³¨æ„ï¼šfloat â†’ intï¼ˆç²¾åº¦æŸå¤±ï¼Œæˆªæ–­å°æ•°éƒ¨åˆ†ï¼‰
    std::cout << "n = " << n << std::endl;  // è¾“å‡ºï¼šn = 3
}
```

> **å…³é”®åŒºåˆ«**ï¼šä¸Cé£æ ¼è½¬æ¢ç›¸æ¯”ï¼Œ`static_cast` æ˜ç¡®è¡¨è¾¾äº†"è¿™æ˜¯æœ‰æ„çš„ç±»å‹è½¬æ¢"ï¼Œä¾¿äºä»£ç å®¡æŸ¥ã€‚

#### 1.2.2 ç»§æ‰¿ä½“ç³»ä¸­çš„ç±»å‹è½¬æ¢

- **å‘ä¸Šè½¬å‹ï¼ˆå®‰å…¨ï¼‰**ï¼šæ´¾ç”Ÿç±» â†’ åŸºç±»ï¼ˆéšå¼è½¬æ¢å³å¯ï¼Œä½†æ˜¾å¼ä½¿ç”¨`static_cast`æ›´æ¸…æ™°ï¼‰
- **å‘ä¸‹è½¬å‹ï¼ˆå±é™©ï¼‰**ï¼šåŸºç±» â†’ æ´¾ç”Ÿç±»ï¼ˆ**å¿…é¡»ç¡®ä¿å¯¹è±¡å®é™…æ˜¯ç›®æ ‡æ´¾ç”Ÿç±»ç±»å‹**ï¼‰

```cpp
class Base { /*...*/ };
class Derived : public Base { /*...*/ };

int main() {
    // å®‰å…¨çš„å‘ä¸Šè½¬å‹
    Derived d;
    Base* b_ptr = static_cast<Base*>(&d);  // æ˜¾å¼è½¬æ¢ï¼Œè™½å¯çœç•¥ä½†æ¨èä¿ç•™
    
    // å±é™©çš„å‘ä¸‹è½¬å‹ï¼ˆä»…å½“ç¡®å®šç±»å‹æ—¶ä½¿ç”¨ï¼ï¼‰
    Base* base_ptr = new Derived();
    Derived* derived_ptr = static_cast<Derived*>(base_ptr);  // å¯èƒ½å¯¼è‡´æœªå®šä¹‰è¡Œä¸ºï¼
}
```

> **é‡è¦è­¦ç¤º**ï¼šå½“`base_ptr`å®é™…æŒ‡å‘`Base`å¯¹è±¡è€Œé`Derived`æ—¶ï¼Œ`static_cast`çš„å‘ä¸‹è½¬å‹ä¼šå¯¼è‡´æœªå®šä¹‰è¡Œä¸ºã€‚æ­¤æ—¶åº”æ”¹ç”¨`dynamic_cast`ã€‚

#### 1.2.3 å…¶ä»–å¸¸è§ç”¨é€”

- `void*` ä¸å…¶ä»–æŒ‡é’ˆç±»å‹äº’è½¬ï¼ˆå¸¸ç”¨äºåº•å±‚APIï¼‰
- æšä¸¾ç±»å‹ä¸æ•´æ•°äº’è½¬
- è°ƒç”¨ç±»çš„ç±»å‹è½¬æ¢è¿ç®—ç¬¦

```cpp
// void* è½¬æ¢ç¤ºä¾‹
int num = 42;
void* vptr = &num;
int* iptr = static_cast<int*>(vptr);  // å®‰å…¨è½¬æ¢

// æšä¸¾è½¬æ¢ç¤ºä¾‹
enum Color { RED, GREEN, BLUE };
Color c = GREEN;
int idx = static_cast<int>(c);  // æšä¸¾ â†’ æ•´æ•°
```

### 1.3 ä½¿ç”¨æ³¨æ„äº‹é¡¹

- âœ… **æ¨èä½¿ç”¨åœºæ™¯**ï¼šåŸºæœ¬ç±»å‹è½¬æ¢ã€å®‰å…¨çš„å‘ä¸Šè½¬å‹ã€æ˜ç¡®çš„æŒ‡é’ˆç±»å‹è½¬æ¢
- âŒ **ç¦æ­¢ä½¿ç”¨åœºæ™¯**ï¼š
  - ç§»é™¤`const`é™å®šï¼ˆåº”ä½¿ç”¨`const_cast`ï¼‰
  - åœ¨æ— å…³ç±»å‹é—´å¼ºåˆ¶è½¬æ¢ï¼ˆåº”ä½¿ç”¨`reinterpret_cast`ï¼‰
  - ä¸ç¡®å®šç±»å‹çš„å‘ä¸‹è½¬å‹ï¼ˆåº”ä½¿ç”¨`dynamic_cast`ï¼‰
- âš ï¸ **å…³é”®åŸåˆ™**ï¼šè½¬æ¢å¿…é¡»åœ¨ç¼–è¯‘æ—¶é€»è¾‘ä¸Šåˆç†ï¼Œå¦åˆ™ä¼šå¯¼è‡´æœªå®šä¹‰è¡Œä¸º

---

## 2. `dynamic_cast`ï¼šè¿è¡Œæ—¶å®‰å…¨å‘ä¸‹è½¬å‹

### 2.1 æ ¸å¿ƒç‰¹ç‚¹

`dynamic_cast` æ˜¯**å”¯ä¸€**æä¾›è¿è¡Œæ—¶ç±»å‹æ£€æŸ¥çš„è½¬æ¢æ“ä½œç¬¦ï¼Œä¸“ä¸ºç»§æ‰¿ä½“ç³»è®¾è®¡ã€‚å®ƒä¾èµ–RTTIï¼ˆRun-Time Type Informationï¼‰æœºåˆ¶ï¼Œç¡®ä¿å‘ä¸‹è½¬å‹çš„å®‰å…¨æ€§ã€‚

```mermaid
flowchart TD
    A[åŸºç±»æŒ‡é’ˆ] --> B{RTTIè¿è¡Œæ—¶æ£€æŸ¥}
    B -->|å¯¹è±¡å®é™…æ˜¯ç›®æ ‡ç±»å‹| C[æˆåŠŸè½¬æ¢]
    B -->|å¯¹è±¡ä¸æ˜¯ç›®æ ‡ç±»å‹| D[æŒ‡é’ˆï¼šè¿”å›nullptr<br>å¼•ç”¨ï¼šæŠ›å‡ºbad_castå¼‚å¸¸]
```

### 2.2 æ­£ç¡®ä½¿ç”¨æ–¹å¼

#### æŒ‡é’ˆè½¬æ¢ï¼ˆæ¨èæ–¹å¼ï¼‰

```cpp
Base* base_ptr = new Derived();
Derived* derived_ptr = dynamic_cast<Derived*>(base_ptr);

if (derived_ptr) {
    // è½¬æ¢æˆåŠŸï¼Œå®‰å…¨ä½¿ç”¨æ´¾ç”Ÿç±»åŠŸèƒ½
    derived_ptr->derived_function();
} else {
    // è½¬æ¢å¤±è´¥ï¼Œå¤„ç†é”™è¯¯æƒ…å†µ
    std::cerr << "ç±»å‹è½¬æ¢å¤±è´¥ï¼" << std::endl;
}
```

#### å¼•ç”¨è½¬æ¢ï¼ˆéœ€å¼‚å¸¸å¤„ç†ï¼‰

```cpp
try {
    Derived& derived_ref = dynamic_cast<Derived&>(*base_ptr);
    derived_ref.derived_function();
} catch (const std::bad_cast& e) {
    std::cerr << "å¼•ç”¨è½¬æ¢å¤±è´¥: " << e.what() << std::endl;
}
```

### 2.3 å¿…è¦æ¡ä»¶

- **åŸºç±»å¿…é¡»åŒ…å«è™šå‡½æ•°**ï¼ˆé€šå¸¸éœ€è¦è™šææ„å‡½æ•°ï¼‰
- **å¯ç”¨RTTIæ”¯æŒ**ï¼ˆç¼–è¯‘å™¨é»˜è®¤å¼€å¯ï¼Œä½†åµŒå…¥å¼ç³»ç»Ÿå¯èƒ½ç¦ç”¨ï¼‰

```cpp
// å¿…é¡»è¿™æ ·å®šä¹‰åŸºç±»ï¼
class Base {
public:
    virtual ~Base() {}  // è™šææ„å‡½æ•°æ˜¯RTTIçš„å¿…è¦æ¡ä»¶
};
```

### 2.4 ä½¿ç”¨å»ºè®®

- âœ… **ä»…ç”¨äºç»§æ‰¿ä½“ç³»**ï¼šä¸è¦ç”¨äºåŸºæœ¬ç±»å‹è½¬æ¢
- âœ… **ä¼˜å…ˆæŒ‡é’ˆè½¬æ¢**ï¼šæ¯”å¼•ç”¨è½¬æ¢æ›´æ˜“å¤„ç†é”™è¯¯
- âŒ **é¿å…è¿‡åº¦ä½¿ç”¨**ï¼šé¢‘ç¹ä½¿ç”¨å¯èƒ½è¡¨æ˜è®¾è®¡é—®é¢˜ï¼ˆè€ƒè™‘é‡æ„ä¸ºè™šå‡½æ•°ï¼‰
- âš ï¸ **æ€§èƒ½è€ƒé‡**ï¼šæ¯”`static_cast`æ…¢10-100å€ï¼Œé¿å…åœ¨æ€§èƒ½å…³é”®è·¯å¾„ä½¿ç”¨

---

## 3. `const_cast`ï¼šä¿®æ”¹å¸¸é‡å±æ€§

### 3.1 æ ¸å¿ƒç‰¹ç‚¹

`const_cast` **å”¯ä¸€ç”¨é€”**æ˜¯æ·»åŠ æˆ–ç§»é™¤ç±»å‹çš„`const`æˆ–`volatile`é™å®šç¬¦ã€‚è¿™æ˜¯å››ç§è½¬æ¢ä¸­**æœ€å—é™**çš„æ“ä½œç¬¦ã€‚

### 3.2 åˆæ³•ä½¿ç”¨åœºæ™¯

#### ä¸æ—§å¼C APIäº¤äº’

```cpp
void legacy_c_function(char* str);  // æ—§APIä¸æ¥å—const

int main() {
    const std::string msg = "Hello";
    // å®‰å…¨ï¼šåŸå§‹å¯¹è±¡éå¸¸é‡
    legacy_c_function(const_cast<char*>(msg.c_str()));
}
```

#### ä¸´æ—¶ä¿®æ”¹å¯¹è±¡å±æ€§ï¼ˆéœ€è°¨æ…ï¼ï¼‰

```cpp
class Data {
    mutable int cache;  // å…è®¸constæˆå‘˜å‡½æ•°ä¿®æ”¹
public:
    int getValue() const {
        if (cache == 0) {
            // é€šè¿‡const_castä¿®æ”¹mutableæˆå‘˜ï¼ˆåˆæ³•ä½†éœ€æ³¨é‡Šè¯´æ˜ï¼‰
            const_cast<Data*>(this)->cache = computeExpensiveValue();
        }
        return cache;
    }
};
```

### 3.3 è‡´å‘½é™·é˜±

```cpp
const int x = 10;
int* p = const_cast<int*>(&x);
*p = 20;  // æœªå®šä¹‰è¡Œä¸ºï¼ä¿®æ”¹çœŸæ­£constå¯¹è±¡ä¼šå¯¼è‡´ç¨‹åºå´©æºƒ
```

> **é»„é‡‘æ³•åˆ™**ï¼šåªæœ‰å½“åŸå§‹å¯¹è±¡**æœ¬èº«ä¸æ˜¯const**æ—¶ï¼Œé€šè¿‡`const_cast`ç§»é™¤constæ‰æ˜¯å®‰å…¨çš„ã€‚å¦åˆ™ä¼šå¯¼è‡´æœªå®šä¹‰è¡Œä¸ºã€‚

### 3.4 æœ€ä½³å®è·µ

- ğŸ” **å…ˆæ£€æŸ¥è®¾è®¡**ï¼š90%çš„const_castéœ€æ±‚æºäºè®¾è®¡ç¼ºé™·
- ğŸ“ **æ·»åŠ æ˜ç¡®æ³¨é‡Š**ï¼šè¯´æ˜ä¸ºä»€ä¹ˆå¿…é¡»ä½¿ç”¨const_cast
- ğŸš« **é¿å…ä¿®æ”¹çœŸæ­£constå¯¹è±¡**ï¼šè¿™æ˜¯ç¨‹åºå´©æºƒçš„å¸¸è§åŸå› 

---

## 4. `reinterpret_cast`ï¼šåº•å±‚å†…å­˜æ“ä½œ

### 4.1 æ ¸å¿ƒç‰¹ç‚¹

`reinterpret_cast` æ˜¯**æœ€å±é™©**çš„è½¬æ¢æ“ä½œç¬¦ï¼Œç›´æ¥æ“ä½œå†…å­˜è¡¨ç¤ºã€‚å®ƒä¸åšä»»ä½•ç±»å‹æ£€æŸ¥ï¼Œç›¸å½“äºå‘Šè¯‰ç¼–è¯‘å™¨"æˆ‘çŸ¥é“è‡ªå·±åœ¨åšä»€ä¹ˆ"ã€‚

```mermaid
flowchart LR
    A[ä»»æ„ç±»å‹] -->|æ— è§†ç±»å‹ç³»ç»Ÿ| B[ç›®æ ‡ç±»å‹]
    B --> C{å†…å­˜å¸ƒå±€æ˜¯å¦åŒ¹é…ï¼Ÿ}
    C -->|æ˜¯| D[å¯èƒ½å·¥ä½œ]
    C -->|å¦| E[æœªå®šä¹‰è¡Œä¸º]
```

### 4.2 æå°‘æ•°åˆæ³•åœºæ™¯

#### æŒ‡é’ˆä¸æ•´æ•°äº’è½¬ï¼ˆç³»ç»Ÿç¼–ç¨‹ï¼‰

```cpp
void* ptr = malloc(100);
uintptr_t addr = reinterpret_cast<uintptr_t>(ptr);  // å®‰å…¨ï¼šæ ‡å‡†ä¿è¯
```

#### äºŒè¿›åˆ¶æ•°æ®è§£æï¼ˆéœ€è°¨æ…ï¼‰

```cpp
uint32_t data = 0x12345678;
uint8_t* bytes = reinterpret_cast<uint8_t*>(&data);
// æ³¨æ„ï¼šå­—èŠ‚åºé—®é¢˜ï¼å¯èƒ½å¾—åˆ°[0x78, 0x56, 0x34, 0x12]æˆ–[0x12, ...]
```

### 4.3 ç»å¯¹ç¦æ­¢çš„ç”¨æ³•

```cpp
int i = 42;
float* f = reinterpret_cast<float*>(&i);  // å±é™©ï¼å†…å­˜è§£é‡Šå®Œå…¨ä¸åŒ
std::cout << *f;  // æœªå®šä¹‰è¡Œä¸ºï¼šå¯èƒ½è¾“å‡ºå¥‡æ€ªæ•°å­—æˆ–ç¨‹åºå´©æºƒ
```

### 4.4 å®‰å…¨æ›¿ä»£æ–¹æ¡ˆ

| éœ€æ±‚                | æ¨èæ›¿ä»£æ–¹æ¡ˆ                     |
|---------------------|-------------------------------|
| æŒ‡é’ˆè½¬æ•´æ•°          | `std::uintptr_t` + `reinterpret_cast` |
| ç±»å‹åŒå…³            | `std::memcpy` æˆ– C++20 `std::bit_cast` |
| å¯¹è±¡å¸ƒå±€æ£€æŸ¥        | `static_assert(sizeof(T) == N)` |

> **å¼ºçƒˆå»ºè®®**ï¼šé™¤éç¼–å†™æ“ä½œç³»ç»Ÿã€é©±åŠ¨ç¨‹åºæˆ–é«˜æ€§èƒ½åº“ï¼Œå¦åˆ™åº”å®Œå…¨é¿å…ä½¿ç”¨`reinterpret_cast`ã€‚

---

## 5. å››ç§ç±»å‹è½¬æ¢å¯¹æ¯”æŒ‡å—

| ç‰¹æ€§                | `static_cast`                  | `dynamic_cast`                 | `const_cast`                   | `reinterpret_cast`             |
|---------------------|-------------------------------|-------------------------------|-------------------------------|-------------------------------|
| **ä¸»è¦ç”¨é€”**        | é€»è¾‘åˆç†çš„ç¼–è¯‘æ—¶è½¬æ¢           | å®‰å…¨çš„å‘ä¸‹è½¬å‹                 | ä¿®æ”¹const/volatileå±æ€§         | åº•å±‚å†…å­˜æ“ä½œ                  |
| **ç±»å‹æ£€æŸ¥æ—¶æœº**    | ç¼–è¯‘æ—¶                        | è¿è¡Œæ—¶                        | æ—                             | æ—                             |
| **å®‰å…¨æ€§**          | ä¸­ï¼ˆä¾èµ–ç¨‹åºå‘˜åˆ¤æ–­ï¼‰           | é«˜ï¼ˆè‡ªåŠ¨éªŒè¯ç±»å‹ï¼‰             | ä½ï¼ˆæ˜“è¯¯ç”¨ï¼‰                  | æä½ï¼ˆå‡ ä¹æ— ä¿éšœï¼‰            |
| **å…¸å‹åœºæ™¯**        | åŸºæœ¬ç±»å‹è½¬æ¢ã€å‘ä¸Šè½¬å‹         | ç»§æ‰¿ä½“ç³»å‘ä¸‹è½¬å‹               | ä¸æ—§APIäº¤äº’                   | ç³»ç»Ÿçº§ç¼–ç¨‹                    |
| **æ€§èƒ½å¼€é”€**        | æ—                             | é«˜ï¼ˆRTTIæ£€æŸ¥ï¼‰                | æ—                             | æ—                             |
| **æ–°æ‰‹ä½¿ç”¨é¢‘ç‡**    | â˜…â˜…â˜…â˜…â˜†                         | â˜…â˜…â˜†â˜†â˜†                         | â˜…â˜†â˜†â˜†â˜†                         | â˜†â˜†â˜†â˜†â˜†                         |
| **å±é™©ä¿¡å·**        | ç”¨äºå‘ä¸‹è½¬å‹                  | åŸºç±»æ— è™šå‡½æ•°                  | ä¿®æ”¹çœŸæ­£constå¯¹è±¡             | ç”¨äºéæŒ‡é’ˆ/æ•´æ•°è½¬æ¢           |

### é€‰æ‹©å†³ç­–æ ‘

```mermaid
flowchart TD
    A[éœ€è¦ç±»å‹è½¬æ¢ï¼Ÿ] -->|æ˜¯| B{è½¬æ¢ç›®çš„}
    B -->|ä¿®æ”¹constå±æ€§| C[const_cast]
    B -->|ç»§æ‰¿ä½“ç³»å‘ä¸‹è½¬å‹| D{éœ€è¦è¿è¡Œæ—¶æ£€æŸ¥ï¼Ÿ}
    D -->|æ˜¯| E[dynamic_cast]
    D -->|å¦| F[static_cast]
    B -->|åŸºæœ¬ç±»å‹è½¬æ¢| G[static_cast]
    B -->|åº•å±‚å†…å­˜æ“ä½œ| H{å¿…é¡»ç”¨ï¼Ÿ}
    H -->|æ˜¯| I[reinterpret_cast]
    H -->|å¦| J[å¯»æ‰¾æ›¿ä»£æ–¹æ¡ˆ]
    A -->|å¦| K[å¯èƒ½è®¾è®¡é—®é¢˜]
```

## æ•™å­¦æ€»ç»“

1. **ä¼˜å…ˆé€‰æ‹©æœ€å®‰å…¨çš„è½¬æ¢**ï¼š`static_cast` > `dynamic_cast` > `const_cast` > `reinterpret_cast`
2. **é¿å…Cé£æ ¼è½¬æ¢**ï¼š`(type)value` éšè—äº†è½¬æ¢æ„å›¾ï¼Œéš¾ä»¥å®¡æŸ¥
3. **è½¬æ¢å¤±è´¥å¤„ç†**ï¼š
   - æŒ‡é’ˆè½¬æ¢ï¼šæ£€æŸ¥æ˜¯å¦ä¸º`nullptr`
   - å¼•ç”¨è½¬æ¢ï¼šä½¿ç”¨`try/catch`æ•è·`std::bad_cast`
4. **è®¾è®¡ä¼˜äºå¼ºåˆ¶è½¬æ¢**ï¼šé¢‘ç¹éœ€è¦ç±»å‹è½¬æ¢é€šå¸¸è¡¨æ˜ç±»è®¾è®¡éœ€è¦æ”¹è¿›

> **ç»™åˆå­¦è€…çš„å»ºè®®**ï¼šåœ¨90%çš„æ—¥å¸¸ç¼–ç¨‹ä¸­ï¼Œä½ åªéœ€è¦æŒæ¡`static_cast`å’Œ`dynamic_cast`ã€‚å½“çœ‹åˆ°ä»£ç ä¸­å‡ºç°`const_cast`æˆ–`reinterpret_cast`æ—¶ï¼Œåº”è§†ä¸º"è¿™é‡Œå¯èƒ½æœ‰è®¾è®¡é—®é¢˜"çš„è­¦ç¤ºä¿¡å·ã€‚
